<!DOCTYPE html>
<html lang="zh-cn" data-theme="">
<head>
<meta name="generator" content="Hugo 0.132.2">       
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<title>刻下来的幸福时光</title>
<meta name="description" content="这城市太多地方有我对你的记忆。"> 
<script>
const STORAGE_KEY = 'user-color-scheme';
let currentTheme;
let hasUserSetTheme = false;

if (localStorage.getItem(STORAGE_KEY)) {
    currentTheme = localStorage.getItem(STORAGE_KEY);
    document.documentElement.setAttribute('data-theme', currentTheme);
    hasUserSetTheme = true;
}
</script>
<!-- 霞鹜文楷 Regular -->
<link rel="stylesheet" href="https://cdn.jkjoy.cn/LxgwWenKai_Webfonts/dist/LXGWWenKai-Regular.css" />
<style>
  body {
    font-family: "LXGWWenKai", sans-serif;
    visibility: hidden;
    opacity: 0;
  }
</style> 
<link rel="stylesheet" href="https://cdn.jkjoy.cn/tooot/style.css">  
</head>
<body>
    <div class="quan-wrapper container">
        <header class="common-header">
                <img src="https://quan.lms.im/images/banner.jpg" alt="朋友圈" class="banner-img">
<div class="header-top">
    <div class="header-top-left"></div>
    <div class="header-top-right">
        <ul class="social-icons">
        <li>
            <a href="https://www.github.com/jkjoy" title="Github" rel="me">
            <span class="inline-svg" >
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
            </span>
            </a>
        </li>
        <li>
            <a href="https://www.github.com/jkjoy" title="Bilibili" rel="me">
            <span class="inline-svg" >
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92C65.6 463.2 43.8 454.2 26.7 436.8C9.7 419.4 .8 396.5 0 368.2V169.8C.8 143.8 9.7 122.2 26.7 104.1C43.8 87.8 65.6 78.8 92 78H121.4L96.1 52.2C90.3 46.5 87.4 39.2 87.4 30.4C87.4 21.6 90.3 14.3 96.1 8.6C101.8 2.9 109.1 0 117.9 0C126.7 0 134 2.9 139.8 8.6L213.1 78H301.1L375.6 8.6C381.7 2.9 389.2 0 398 0C406.8 0 414.1 2.9 419.9 8.6C425.6 14.3 428.5 21.6 428.5 30.4C428.5 39.2 425.6 46.5 419.9 52.2L394.6 78L423.9 78C450.3 78.8 471.9 87.8 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.1C86.5 140.9 78.6 144.2 72.5 150.3C66.3 156.4 63.1 164.2 62.7 173.8V368.2C62.7 377.4 66 385.2 72.5 391.7C79 398.2 86.9 401.5 96.1 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"/></svg>
            </span>
            </a>
        </li>
        <li>
            <a href="mailto:sun@ow3.cn" title="Email" rel="me">
            <span class="inline-svg" >
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg>
            </span>
            </a>
        </li>
        <li>
            <a href="https://ow3.cn/@sun" title="Mastodon" rel="me">
            <span class="inline-svg" >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
            </span>
            </a>
        </li>
 
     </ul>
        <div class="theme-switcher">
            <span class="inline-svg" >
                <svg xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 290 290">
                  <path fill="currentColor" d="M142.959,0C64.131,0,0,64.132,0,142.96c0,78.828,64.131,142.959,142.959,142.959c78.828,0,142.96-64.131,142.96-142.959  C285.919,64.132,221.787,0,142.959,0z M142.959,260.919V142.96V25c65.043,0,117.96,52.917,117.96,117.96  C260.919,208.003,208.002,260.919,142.959,260.919z"/>
                </svg>
            </span>
        </div>  
    </div>
</div>
<div class="site-title">
  <span class="site-name">浪子</span>
    <p>曾梦想仗剑走天涯。</p>
    <a href="/home"><img src="https://im.loliko.cn/accounts/avatars/111/363/033/003/475/492/original/f726dbce158df8b9.jpg" alt="sun" class="avatar-img"></a>
</div>
</header>
<main id="main" tabindex="-1">
<div class="post-list h-feed">
    <div id="tooot"></div>
   
    <script>
        window.onload = function() {
            let offset = 0; // 初始偏移量
            const limit = 10; // 每次加载的数量
        
            function formatHTML(toots) {
                let htmlString = '';      
                toots.forEach(toot => {
                    const { content, account, created_at, url, media_attachments, application } = toot;
                    let mediaHTML = ''; // 初始化资源相关HTML为空字符串
                    let imageCount = 0; // 记录图片数量
                    // 处理媒体附件
                    if (media_attachments.length > 0) {
                        media_attachments.forEach(attachment => {
                            if (attachment.type === 'image') {
                                mediaHTML += `<div class="image-item"><a href="${attachment.url}" target="_blank"><img src="${attachment.preview_url}" data="img" class="lozad"></a></div>`;
                                imageCount++;
                            }
                        });
                    }
                    // 根据图片数量设置CSS类
                    let gridClass = '';
                    if (imageCount === 1) {
                        gridClass = 'single-image';
                    } else if (imageCount > 1 && imageCount < 3) {
                        gridClass = 'image-grid three-image';
                    } else if (imageCount >= 3 && imageCount < 10) {
                        gridClass = 'image-grid three-image';
                    }
                    // 使用 marked 转换 markdown 内容为 HTML
                    const htmlContent = marked.parse(content);
        
                    // 创建 HTML 字符串
                    htmlString += `               
    <article class="post h-feed">
    <img src="${account.avatar}" alt="${account.display_name}" class="avatar">
    <div class="post-right">
        <div class="post-header">
            <a class="post-author" rel="author" href="${account.url}">${account.display_name}</a>
        </div>
        <div class="post-summary">
           ${htmlContent}
        </div>
         <div class="post-resource images-wrapper ${gridClass}">${mediaHTML}</div>
    <div class="post-info">
        <div class="post-date dt-published">
            <a class="u-url" href="${url}"  title="发表时间"><time class="post-date" datetime="${new Date(created_at).toLocaleString()}">${new Date(created_at).toLocaleString()}</time></a>
             · <a href="${application.website}"  title="使用客户端" class="cursor-pointer text-color-link no-underline" target="_blank">${application.name}</a>
        </div>
    <div class="post-tool">
        <span class="inline-svg" >
           <svg xmlns="http://www.w3.org/2000/svg" t="1709204592505" class="icon" viewBox="0 0 1024 1024" version="1.1" p-id="16237" width="16" height="16"><path fill="currentColor" d="M229.2 512m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" p-id="16238" fill="#8a8a8a"/><path fill="currentColor" d="M794.8 512m-140 0a140 140 0 1 0 280 0 140 140 0 1 0-280 0Z" p-id="16239" fill="#8a8a8a"/></svg>
         </span>
    </div>
    <div class="post-tool-content">
        <div class="d-flex tool-content-inner">
            <div class="post-zan d-flex">
                <svg data-v-e8d5a3a3="" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-heart-icon"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg>
                <span>赞</span>
            </div>
            <div class="divider"></div>
            <div class="post-toggle-comment d-flex" data-post="/memos/2024072503/">
                <svg data-v-e8d5a3a3="" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-square-more-icon"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M8 10h.01"></path><path d="M12 10h.01"></path><path d="M16 10h.01"></path></svg>
                <span>评论</span>
            </div>
        </div>
    </div>
</div>
    </div>
</article>
            `;});
                return htmlString;
            }
        
            function fetchToots() {
                return fetch('https://memos.jkjoy.cn/m.json')
                    .then(response => response.json())
                    .catch(error => {
                        console.error('Error fetching toots:', error);
                        return [];
                    });
            }
        
            function fetchAndDisplayToots() {
              fetchToots().then(data => {
            const memosContainer = document.getElementById('tooot');
            const tootsToShow = data.slice(offset, offset + limit);
            if (tootsToShow.length > 0) {
                memosContainer.innerHTML += formatHTML(tootsToShow);
                offset += limit;
                }  
                });
            }
        
    // 创建一个新的元素用于观察
    const observerTarget = document.createElement('div');
    observerTarget.style.height = '50px';
    observerTarget.style.width = '1px';
    document.body.appendChild(observerTarget);

    // 创建 IntersectionObserver 实例
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                fetchAndDisplayToots();
            }
        });
    });

    // 开始观察目标元素
    observer.observe(observerTarget);

    // 初始获取并展示 toots
    fetchAndDisplayToots();
};
        </script>     
    </div>
</main>
 
            <footer class="common-footer">
    <div class="common-footer-bottom">
        <div class="copyright">
            版权所有 <br>
            <a href="http://beian.miit.gov.cn/" class="no-underline footer" target="_blank">鄂ICP备16022970号-12</a>
        </div> 
    </div>
</footer>
 
        <script src="https://memos.jkjoy.cn/js/marked.min.js"></script>
        <script src="https://cdn.jkjoy.cn/tooot/1.js" type="text/javascript"></script>
        <script src="https://cdn.jkjoy.cn/tooot/2.js" type="text/javascript"></script>
        <script src="https://cdn.jkjoy.cn/tooot/3.js" type="text/javascript"></script>
        <script src="https://cdn.jkjoy.cn/tooot/4.js" type="text/javascript"></script>
    </div>
</body>
</html>
